<%- include('../includes/dashboard-header') %>

<div class="dashboard-container integrated-report">
  
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RAPOR BAÅLIÄI
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <header class="report-header">
    <a href="/dashboard" class="back-link">â† SektÃ¶rlere DÃ¶n</a>
    <h1>ğŸ“Š <%= sector.sektor_adi %> - BÃ¼tÃ¼nleÅŸik Rapor</h1>
    <p class="report-subtitle">GÃ¼ncel ve geÃ§miÅŸ dÃ¶nem sektÃ¶rel veriler ile ilgili Ã¼lkelerin ekonomik gÃ¶stergeleri</p>
  </header>

  <% if (hasData) { %>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         BÃ–LÃœM 1: GÃœNCEL SEKTÃ–REL DURUM
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="report-section" id="current-sector">
      <div class="section-header">
        <h2>ğŸ“ˆ BÃ¶lÃ¼m 1: GÃ¼ncel SektÃ¶rel Durum</h2>
        <span class="section-badge">2024 Verileri</span>
      </div>

      <!-- KPI KartlarÄ± -->
      <div class="kpi-grid">
        <div class="kpi-card">
          <div class="kpi-icon blue"><span>ğŸŒ</span></div>
          <div class="kpi-content">
            <h3 class="kpi-value"><%= stats.totalCountries %></h3>
            <p class="kpi-label">Ãœlke SayÄ±sÄ±</p>
          </div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon green"><span>ğŸ“¤</span></div>
          <div class="kpi-content">
            <h3 class="kpi-value">$<%= (stats.totalExport / 1000).toFixed(1) %>B</h3>
            <p class="kpi-label">Toplam Ä°hracat</p>
          </div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon orange"><span>ğŸ“ˆ</span></div>
          <div class="kpi-content">
            <h3 class="kpi-value">%<%= stats.avgGrowth %></h3>
            <p class="kpi-label">Ortalama BÃ¼yÃ¼me</p>
          </div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon purple"><span>ğŸ‘¥</span></div>
          <div class="kpi-content">
            <h3 class="kpi-value"><%= (stats.totalEmployment / 1000).toFixed(1) %>M</h3>
            <p class="kpi-label">Toplam Ä°stihdam</p>
          </div>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BÃ–LÃœM A: GRAFÄ°KSEL KIYASLAMA
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div class="charts-section">
        <h3 class="subsection-title">ğŸ“Š Grafiksel KÄ±yaslama (17 Ãœlke)</h3>
        
        <div class="charts-grid">
          <!-- Grafik 1: Ticaret Dengesi (Yatay Bar) -->
          <div class="chart-card full-width">
            <div class="card-header">
              <h4>ğŸ“ˆ Ä°hracat vs Ä°thalat KarÅŸÄ±laÅŸtÄ±rmasÄ±</h4>
              <span class="card-subtitle">Ticaret dengesi analizi - TÃ¼m Ã¼lkeler</span>
            </div>
            <div class="card-body" style="height: 550px;">
              <canvas id="tradeChart"></canvas>
            </div>
          </div>

          <!-- Grafik 2: YatÄ±rÄ±m ve BÃ¼yÃ¼me Karma Grafik (Bar + Line) -->
          <div class="chart-card">
            <div class="card-header">
              <h4>ğŸ“Š YatÄ±rÄ±m ve BÃ¼yÃ¼me KarÅŸÄ±laÅŸtÄ±rmasÄ±</h4>
              <span class="card-subtitle">SÃ¼tunlar: YatÄ±rÄ±m (M$) | Ã‡izgi: BÃ¼yÃ¼me OranÄ± (%)</span>
            </div>
            <div class="card-body" style="height: 450px;">
              <canvas id="investmentGrowthChart"></canvas>
            </div>
          </div>

          <!-- Harita -->
          <div class="chart-card">
            <div class="card-header">
              <h4>ğŸ—ºï¸ Ä°hracat HaritasÄ±</h4>
              <span class="card-subtitle">CoÄŸrafi daÄŸÄ±lÄ±m</span>
            </div>
            <div class="card-body">
              <div id="world-map" style="width: 100%; height: 350px;"></div>
            </div>
            <div class="card-legend">
              <span class="legend-item"><span class="legend-color low"></span> DÃ¼ÅŸÃ¼k</span>
              <span class="legend-item"><span class="legend-color mid"></span> Orta</span>
              <span class="legend-item"><span class="legend-color high"></span> YÃ¼ksek</span>
            </div>
          </div>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           BÃ–LÃœM B: DÄ°NAMÄ°K KIYASLAMA GRAFÄ°ÄÄ°
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div class="chart-card dynamic-comparison">
        <div class="card-header">
          <h3>ğŸ“Š Dinamik KÄ±yaslama GrafiÄŸi (17 Ãœlke)</h3>
          <div class="metric-tabs">
            <button class="metric-tab active" data-metric="ihracat">ğŸ“¤ Ä°hracat</button>
            <button class="metric-tab" data-metric="uretim">ğŸ­ Ãœretim</button>
            <button class="metric-tab" data-metric="istihdam">ğŸ‘¥ Ä°stihdam</button>
            <button class="metric-tab" data-metric="yatirim">ğŸ’° YatÄ±rÄ±m</button>
          </div>
        </div>
        <div class="card-body" style="height: 500px;">
          <canvas id="dynamicComparisonChart"></canvas>
        </div>
      </div>

      <!-- Accordion: DetaylÄ± Tablo (Gizli) -->
      <div class="accordion-section">
        <button class="accordion-toggle" onclick="toggleAccordion('sectorTableAccordion')">
          <span>ğŸ“‹ DetaylÄ± Tablo Verilerini GÃ¶ster</span>
          <span class="accordion-icon">â–¼</span>
        </button>
        <div class="accordion-content" id="sectorTableAccordion" style="display: none;">
          <div class="table-card detailed-table">
            <div class="card-header">
              <h3>ğŸ“‹ DetaylÄ± SektÃ¶r Verileri (17 Ãœlke)</h3>
              <span class="record-count"><%= tableData.length %> Ã¼lke</span>
            </div>
            <div class="table-responsive">
              <table class="data-table" id="sectorTable">
                <thead>
                  <tr>
                    <th>Ãœlke</th>
                    <th>Ãœretim MiktarÄ±</th>
                    <th>Kapasite PuanÄ±</th>
                    <th>Ä°hracat (M$)</th>
                    <th>Ä°thalat (M$)</th>
                    <th>Ticaret Dengesi</th>
                    <th>BÃ¼yÃ¼me (%)</th>
                    <th>YatÄ±rÄ±m (M$)</th>
                    <th>Ä°stihdam (Bin)</th>
                    <th>Yerli Ãœretim (%)</th>
                    <th>Trend</th>
                  </tr>
                </thead>
                <tbody>
                  <% tableData.forEach(function(row) { %>
                    <tr class="<%= row.isHighGrowth ? 'high-growth-row' : '' %>" data-country="<%= row.ulke_adi %>">
                      <td>
                        <strong><%= row.ulke_adi %></strong>
                        <span class="iso-badge"><%= row.iso_kodu %></span>
                        <% if (row.isExporter) { %><span class="exporter-badge">ğŸ“¤</span><% } %>
                      </td>
                      <td><%= row.uretim.toLocaleString('tr-TR') %></td>
                      <td>
                        <div class="capacity-bar">
                          <div class="capacity-fill" style="width: <%= Math.min(row.kapasite, 100) %>%"></div>
                          <span><%= row.kapasite.toFixed(0) %></span>
                        </div>
                      </td>
                      <td class="text-success">$<%= row.ihracat.toLocaleString('tr-TR') %></td>
                      <td class="text-danger">$<%= row.ithalat.toLocaleString('tr-TR') %></td>
                      <td>
                        <span class="trade-balance <%= row.ticaretDengesi >= 0 ? 'positive' : 'negative' %>">
                          <%= row.ticaretDengesi >= 0 ? '+' : '' %>$<%= row.ticaretDengesi.toLocaleString('tr-TR') %>
                        </span>
                      </td>
                      <td>
                        <span class="growth-badge <%= row.buyume > 5 ? 'positive' : row.buyume > 0 ? 'neutral' : 'negative' %>">
                          <%= row.buyume > 0 ? '+' : '' %><%= row.buyume.toFixed(1) %>%
                        </span>
                      </td>
                      <td>$<%= row.yatirim.toLocaleString('tr-TR') %></td>
                      <td><%= row.istihdam.toLocaleString('tr-TR') %></td>
                      <td>%<%= row.yerliUretim.toFixed(1) %></td>
                      <td class="trend-cell" data-country="<%= row.ulke_adi %>">
                        <span class="trend-sparkline">ğŸ“Š</span>
                      </td>
                    </tr>
                  <% }); %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         BÃ–LÃœM 2: SEKTÃ–REL YARIÅ GRAFÄ°ÄÄ° (Trendler)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="report-section" id="historical-sector">
      <div class="section-header">
        <h2>ğŸ BÃ¶lÃ¼m 2: SektÃ¶rel YarÄ±ÅŸ GrafiÄŸi</h2>
        <span class="section-badge">2018-2023 Trendleri</span>
      </div>

      <% if (hasHistoricalSector) { %>
        <!-- SektÃ¶rel YarÄ±ÅŸ GrafiÄŸi (Multi-Line Chart) -->
        <div class="chart-card">
          <div class="card-header">
            <h3>ğŸ“ˆ Ãœlkelerin SektÃ¶rel Ä°hracat YarÄ±ÅŸÄ± (2018-2023)</h3>
            <span class="card-subtitle">Lejanttan Ã¼lkelere tÄ±klayarak Ã§izgileri gizleyebilirsiniz</span>
          </div>
          <div class="card-body" style="height: 500px;">
            <canvas id="sectorRaceChart"></canvas>
          </div>
        </div>

        <!-- Accordion: GeÃ§miÅŸ Tablo (Gizli) -->
        <div class="accordion-section">
          <button class="accordion-toggle" onclick="toggleAccordion('historicalSectorAccordion')">
            <span>ğŸ“‹ GeÃ§miÅŸ DÃ¶nem Tablo Verilerini GÃ¶ster</span>
            <span class="accordion-icon">â–¼</span>
          </button>
          <div class="accordion-content" id="historicalSectorAccordion" style="display: none;">
            <div class="table-card">
              <div class="card-header">
                <h3>ğŸ“ˆ YÄ±llara GÃ¶re SektÃ¶r Verileri</h3>
                <span class="record-count"><%= historicalSectorData.length %> kayÄ±t</span>
              </div>
              <div class="table-responsive">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Ãœlke</th>
                      <th>YÄ±l</th>
                      <th>Ä°hracat (M$)</th>
                      <th>Ä°thalat (M$)</th>
                      <th>BÃ¼yÃ¼me (%)</th>
                      <th>Ä°stihdam (Bin)</th>
                      <th>YatÄ±rÄ±m (M$)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% historicalSectorData.forEach(function(row) { %>
                      <tr>
                        <td><strong><%= row.ulke_adi %></strong> <span class="iso-badge"><%= row.iso_kodu %></span></td>
                        <td><span class="year-badge"><%= row.yil %></span></td>
                        <td>$<%= row.ihracat.toLocaleString('tr-TR') %></td>
                        <td>$<%= row.ithalat.toLocaleString('tr-TR') %></td>
                        <td>
                          <span class="growth-badge <%= row.buyume > 0 ? 'positive' : 'negative' %>">
                            <%= row.buyume > 0 ? '+' : '' %><%= row.buyume.toFixed(1) %>%
                          </span>
                        </td>
                        <td><%= row.istihdam.toLocaleString('tr-TR') %></td>
                        <td>$<%= row.yatirim.toLocaleString('tr-TR') %></td>
                      </tr>
                    <% }); %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      <% } else { %>
        <div class="empty-state-inline">
          <span>ğŸ“­</span> Bu sektÃ¶r iÃ§in geÃ§miÅŸ dÃ¶nem verisi bulunmuyor.
        </div>
      <% } %>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         BÃ–LÃœM 3-4: EKONOMÄ°K GÃ–STERGELER (Grafikler)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="report-section" id="economy-charts">
      <div class="section-header">
        <h2>ğŸ’° BÃ¶lÃ¼m 3: Ekonomik GÃ¶stergeler</h2>
        <span class="section-badge">Makro Analiz</span>
      </div>

      <% if (hasCurrentEconomy || hasHistoricalEconomy) { %>
        <!-- Ä°ki Yan Yana Grafik -->
        <div class="economy-charts-grid">
          <!-- Grafik A: GSYÄ°H KoÅŸusu -->
          <div class="chart-card">
            <div class="card-header">
              <h3>ğŸ† GSYÄ°H SÄ±ralamasÄ± (17 Ãœlke)</h3>
              <span class="card-subtitle">Ekonomik bÃ¼yÃ¼klÃ¼k karÅŸÄ±laÅŸtÄ±rmasÄ±</span>
            </div>
            <div class="card-body" style="height: 450px;">
              <canvas id="gdpRankingChart"></canvas>
            </div>
          </div>

          <!-- Grafik B: Enflasyon KarÅŸÄ±laÅŸtÄ±rmasÄ± -->
          <div class="chart-card">
            <div class="card-header">
              <h3>ğŸ“‰ Enflasyon KarÅŸÄ±laÅŸtÄ±rmasÄ±</h3>
              <span class="card-subtitle">2023 enflasyon oranlarÄ±</span>
            </div>
            <div class="card-body" style="height: 450px;">
              <canvas id="inflationChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Tarihsel GSYÄ°H Trend GrafiÄŸi -->
        <% if (hasHistoricalEconomy) { %>
        <div class="chart-card" style="margin-top: 2rem;">
          <div class="card-header">
            <h3>ğŸ“ˆ GSYÄ°H Trend YarÄ±ÅŸÄ± (2018-2023)</h3>
            <span class="card-subtitle">Lejanttan Ã¼lkelere tÄ±klayarak Ã§izgileri gizleyebilirsiniz</span>
          </div>
          <div class="card-body" style="height: 500px;">
            <canvas id="gdpTrendChart"></canvas>
          </div>
        </div>
        <% } %>

        <!-- Accordion: Ekonomi TablolarÄ± (Gizli) -->
        <div class="accordion-section">
          <button class="accordion-toggle" onclick="toggleAccordion('economyTablesAccordion')">
            <span>ğŸ“‹ Ekonomik Tablo Verilerini GÃ¶ster</span>
            <span class="accordion-icon">â–¼</span>
          </button>
          <div class="accordion-content" id="economyTablesAccordion" style="display: none;">
            <!-- GÃ¼ncel Ekonomi Tablosu -->
            <% if (hasCurrentEconomy) { %>
            <div class="table-card" style="margin-bottom: 1.5rem;">
              <div class="card-header">
                <h3>ğŸ¦ GÃ¼ncel Makro Ekonomik Veriler</h3>
                <span class="record-count"><%= currentEconomyData.length %> Ã¼lke</span>
              </div>
              <div class="table-responsive">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Ãœlke</th>
                      <th>GSYH (Milyar $)</th>
                      <th>KiÅŸi BaÅŸÄ± ($)</th>
                      <th>BÃ¼yÃ¼me</th>
                      <th>Enflasyon</th>
                      <th>Ä°ÅŸsizlik</th>
                      <th>Risk Notu</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% currentEconomyData.forEach(function(row) { %>
                      <tr>
                        <td><strong><%= row.ulke_adi %></strong> <span class="iso-badge"><%= row.iso_kodu %></span></td>
                        <td>$<%= row.gsyh.toLocaleString('tr-TR') %></td>
                        <td>$<%= row.gsyhKisiBasi.toLocaleString('tr-TR') %></td>
                        <td>
                          <span class="growth-badge <%= row.buyume > 3 ? 'positive' : row.buyume > 0 ? 'neutral' : 'negative' %>">
                            <%= row.buyume > 0 ? '+' : '' %><%= row.buyume.toFixed(1) %>%
                          </span>
                        </td>
                        <td>
                          <span class="indicator-badge <%= row.enflasyon < 5 ? 'good' : row.enflasyon < 10 ? 'warning' : 'danger' %>">
                            %<%= row.enflasyon.toFixed(1) %>
                          </span>
                        </td>
                        <td>
                          <span class="indicator-badge <%= row.issizlik < 5 ? 'good' : row.issizlik < 10 ? 'warning' : 'danger' %>">
                            %<%= row.issizlik.toFixed(1) %>
                          </span>
                        </td>
                        <td><span class="risk-badge risk-<%= row.riskNotu.charAt(0).toLowerCase() %>"><%= row.riskNotu %></span></td>
                      </tr>
                    <% }); %>
                  </tbody>
                </table>
              </div>
            </div>
            <% } %>

            <!-- Tarihsel Ekonomi Tablosu -->
            <% if (hasHistoricalEconomy) { %>
            <div class="table-card">
              <div class="card-header">
                <h3>ğŸ“Š YÄ±llara GÃ¶re Ekonomik Veriler</h3>
                <span class="record-count"><%= historicalEconomyData.length %> kayÄ±t</span>
              </div>
              <div class="table-responsive">
                <table class="data-table">
                  <thead>
                    <tr>
                      <th>Ãœlke</th>
                      <th>YÄ±l</th>
                      <th>GSYH (Milyar $)</th>
                      <th>BÃ¼yÃ¼me (%)</th>
                      <th>Enflasyon (%)</th>
                      <th>Ä°ÅŸsizlik (%)</th>
                      <th>Ä°hracat (Milyar $)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% historicalEconomyData.forEach(function(row) { %>
                      <tr>
                        <td><strong><%= row.ulke_adi %></strong> <span class="iso-badge"><%= row.iso_kodu %></span></td>
                        <td><span class="year-badge"><%= row.yil %></span></td>
                        <td>$<%= row.gsyh.toLocaleString('tr-TR') %></td>
                        <td>
                          <span class="growth-badge <%= row.buyume > 0 ? 'positive' : 'negative' %>">
                            <%= row.buyume > 0 ? '+' : '' %><%= row.buyume.toFixed(1) %>%
                          </span>
                        </td>
                        <td>%<%= row.enflasyon.toFixed(1) %></td>
                        <td>%<%= row.issizlik.toFixed(1) %></td>
                        <td>$<%= row.ihracat.toLocaleString('tr-TR') %></td>
                      </tr>
                    <% }); %>
                  </tbody>
                </table>
              </div>
            </div>
            <% } %>
          </div>
        </div>
      <% } else { %>
        <div class="empty-state-inline">
          <span>ğŸ“­</span> Ekonomi verisi bulunmuyor.
        </div>
      <% } %>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         JAVASCRIPT: Harita ve Grafikler
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script>
      // Backend'den gelen veriler (17 Ã¼lke)
      const mapData = <%- mapData %>;
      const chartLabels = <%- chartLabels %>;
      const chartExportValues = <%- chartExportValues %>;
      const chartImportValues = <%- chartImportValues %>;
      const chartGrowthValues = <%- chartGrowthValues %>;
      const chartInvestmentValues = <%- chartInvestmentValues %>;
      const chartEmploymentValues = <%- chartEmploymentValues %>;
      const trendData = <%- trendData %>;

      // Ek veriler (Tablolardan JSON)
      const tableData = <%- JSON.stringify(tableData) %>;
      const historicalSectorData = <%- JSON.stringify(historicalSectorData || []) %>;
      const currentEconomyData = <%- JSON.stringify(currentEconomyData || []) %>;
      const historicalEconomyData = <%- JSON.stringify(historicalEconomyData || []) %>;

      // 17 Ãœlke iÃ§in Pastel Renk Paleti
      const pastelColors = [
        'rgba(102, 126, 234, 0.8)',  // Mor-Mavi
        'rgba(72, 187, 120, 0.8)',   // YeÅŸil
        'rgba(237, 137, 54, 0.8)',   // Turuncu
        'rgba(159, 122, 234, 0.8)',  // AÃ§Ä±k Mor
        'rgba(66, 153, 225, 0.8)',   // Mavi
        'rgba(245, 101, 101, 0.8)',  // KÄ±rmÄ±zÄ±
        'rgba(56, 178, 172, 0.8)',   // Teal
        'rgba(246, 173, 85, 0.8)',   // SarÄ±
        'rgba(160, 174, 192, 0.8)',  // Gri
        'rgba(236, 201, 75, 0.8)',   // AltÄ±n
        'rgba(129, 230, 217, 0.8)',  // AÃ§Ä±k Teal
        'rgba(251, 182, 206, 0.8)',  // Pembe
        'rgba(144, 205, 244, 0.8)',  // AÃ§Ä±k Mavi
        'rgba(183, 148, 244, 0.8)',  // Lavanta
        'rgba(154, 230, 180, 0.8)',  // AÃ§Ä±k YeÅŸil
        'rgba(252, 129, 129, 0.8)',  // AÃ§Ä±k KÄ±rmÄ±zÄ±
        'rgba(128, 90, 213, 0.8)'    // Koyu Mor
      ];

      // Accordion Toggle Fonksiyonu
      function toggleAccordion(id) {
        const content = document.getElementById(id);
        const button = content.previousElementSibling;
        const icon = button.querySelector('.accordion-icon');
        
        if (content.style.display === 'none') {
          content.style.display = 'block';
          icon.textContent = 'â–²';
          button.classList.add('active');
        } else {
          content.style.display = 'none';
          icon.textContent = 'â–¼';
          button.classList.remove('active');
        }
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // GRAFÄ°K 1: TÄ°CARET DENGESÄ° (Yatay Bar - 17 Ãœlke)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      if (chartLabels.length > 0) {
        const tradeCtx = document.getElementById('tradeChart').getContext('2d');
        new Chart(tradeCtx, {
          type: 'bar',
          data: {
            labels: chartLabels,
            datasets: [
              {
                label: 'Ä°hracat (Milyon $)',
                data: chartExportValues,
                backgroundColor: 'rgba(72, 187, 120, 0.85)',
                borderColor: 'rgba(72, 187, 120, 1)',
                borderWidth: 1,
                borderRadius: 4
              },
              {
                label: 'Ä°thalat (Milyon $)',
                data: chartImportValues,
                backgroundColor: 'rgba(245, 101, 101, 0.85)',
                borderColor: 'rgba(245, 101, 101, 1)',
                borderWidth: 1,
                borderRadius: 4
              }
            ]
          },
          options: {
            indexAxis: 'y', // YATAY BAR
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { position: 'top' },
              tooltip: {
                callbacks: {
                  label: function(ctx) {
                    return ctx.dataset.label + ': $' + ctx.raw.toLocaleString('tr-TR') + ' M';
                  }
                }
              }
            },
            scales: {
              x: { 
                beginAtZero: true,
                title: { display: true, text: 'Milyon $' },
                ticks: {
                  callback: function(value) {
                    return '$' + value.toLocaleString('tr-TR');
                  }
                }
              },
              y: { 
                ticks: { font: { size: 12, weight: '500' } }
              }
            }
          }
        });
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // GRAFÄ°K 2: YATIRIM ve BÃœYÃœME (Mixed Bar/Line Chart - 17 Ãœlke)
      // SÃ¼tunlar: YatÄ±rÄ±m MiktarÄ±, Ã‡izgi: BÃ¼yÃ¼me OranÄ±
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      if (chartLabels.length > 0) {
        const mixedCtx = document.getElementById('investmentGrowthChart').getContext('2d');
        new Chart(mixedCtx, {
          type: 'bar',
          data: {
            labels: chartLabels,
            datasets: [
              {
                label: 'YatÄ±rÄ±m (Milyon $)',
                type: 'bar',
                data: chartInvestmentValues,
                backgroundColor: 'rgba(102, 126, 234, 0.7)',
                borderColor: 'rgba(102, 126, 234, 1)',
                borderWidth: 1,
                borderRadius: 4,
                yAxisID: 'y'
              },
              {
                label: 'BÃ¼yÃ¼me OranÄ± (%)',
                type: 'line',
                data: chartGrowthValues,
                borderColor: 'rgba(72, 187, 120, 1)',
                backgroundColor: 'rgba(72, 187, 120, 0.1)',
                borderWidth: 3,
                pointBackgroundColor: 'rgba(72, 187, 120, 1)',
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 5,
                pointHoverRadius: 7,
                tension: 0.3,
                fill: false,
                yAxisID: 'y1'
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: {
              mode: 'index',
              intersect: false
            },
            plugins: {
              legend: {
                display: true,
                position: 'top',
                labels: {
                  usePointStyle: true,
                  padding: 20,
                  font: { size: 12, weight: '500' }
                }
              },
              tooltip: {
                backgroundColor: 'rgba(0,0,0,0.8)',
                padding: 12,
                titleFont: { size: 14, weight: 'bold' },
                bodyFont: { size: 13 },
                callbacks: {
                  label: function(ctx) {
                    if (ctx.dataset.type === 'line') {
                      return 'BÃ¼yÃ¼me: %' + ctx.raw.toFixed(1);
                    }
                    return 'YatÄ±rÄ±m: $' + ctx.raw.toLocaleString('tr-TR') + ' M';
                  }
                }
              }
            },
            scales: {
              x: {
                grid: { display: false },
                ticks: {
                  font: { size: 11 },
                  maxRotation: 45,
                  minRotation: 45
                }
              },
              y: {
                type: 'linear',
                display: true,
                position: 'left',
                title: {
                  display: true,
                  text: 'YatÄ±rÄ±m (Milyon $)',
                  font: { size: 12, weight: 'bold' },
                  color: 'rgba(102, 126, 234, 1)'
                },
                ticks: {
                  color: 'rgba(102, 126, 234, 1)',
                  callback: function(value) {
                    return '$' + value.toLocaleString('tr-TR');
                  }
                },
                grid: { color: 'rgba(0,0,0,0.05)' }
              },
              y1: {
                type: 'linear',
                display: true,
                position: 'right',
                title: {
                  display: true,
                  text: 'BÃ¼yÃ¼me OranÄ± (%)',
                  font: { size: 12, weight: 'bold' },
                  color: 'rgba(72, 187, 120, 1)'
                },
                ticks: {
                  color: 'rgba(72, 187, 120, 1)',
                  callback: function(value) {
                    return '%' + value.toFixed(1);
                  }
                },
                grid: { drawOnChartArea: false }
              }
            }
          }
        });
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // GRAFÄ°K 3: DÄ°NAMÄ°K KIYASLAMA GRAFÄ°ÄÄ° (Tab'lÄ±)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      let dynamicChart = null;
      const dynamicChartCanvas = document.getElementById('dynamicComparisonChart');
      
      if (dynamicChartCanvas && tableData.length > 0) {
        // Verileri hazÄ±rla
        const sortedByExport = [...tableData].sort((a, b) => b.ihracat - a.ihracat);
        const labels = sortedByExport.map(d => d.ulke_adi);
        
        const metricsData = {
          ihracat: sortedByExport.map(d => d.ihracat),
          uretim: sortedByExport.map(d => d.uretim),
          istihdam: sortedByExport.map(d => d.istihdam),
          yatirim: sortedByExport.map(d => d.yatirim)
        };
        
        const metricLabels = {
          ihracat: 'Ä°hracat (Milyon $)',
          uretim: 'Ãœretim MiktarÄ±',
          istihdam: 'Ä°stihdam (Bin KiÅŸi)',
          yatirim: 'YatÄ±rÄ±m (Milyon $)'
        };
        
        // Her Ã¼lkeye benzersiz renk ata
        const getColors = (data) => {
          return data.map((val, idx) => {
            return pastelColors[idx % pastelColors.length];
          });
        };
        
        // GrafiÄŸi oluÅŸtur
        function createDynamicChart(metric) {
          if (dynamicChart) dynamicChart.destroy();
          
          const ctx = dynamicChartCanvas.getContext('2d');
          dynamicChart = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: labels,
              datasets: [{
                label: metricLabels[metric],
                data: metricsData[metric],
                backgroundColor: getColors(metricsData[metric]),
                borderRadius: 6,
                borderSkipped: false
              }]
            },
            options: {
              indexAxis: 'y',
              responsive: true,
              maintainAspectRatio: false,
              animation: { duration: 800, easing: 'easeOutQuart' },
              plugins: {
                legend: { display: false },
                tooltip: {
                  backgroundColor: 'rgba(0,0,0,0.8)',
                  padding: 12,
                  callbacks: {
                    label: (ctx) => metricLabels[metric] + ': ' + ctx.raw.toLocaleString('tr-TR')
                  }
                }
              },
              scales: {
                x: { 
                  beginAtZero: true,
                  grid: { color: 'rgba(0,0,0,0.05)' },
                  ticks: { callback: (v) => v.toLocaleString('tr-TR') }
                },
                y: { 
                  grid: { display: false },
                  ticks: { font: { size: 12, weight: '500' } }
                }
              }
            }
          });
        }
        
        // Ä°lk grafik
        createDynamicChart('ihracat');
        
        // Tab butonlarÄ±
        document.querySelectorAll('.metric-tab').forEach(btn => {
          btn.addEventListener('click', function() {
            document.querySelectorAll('.metric-tab').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            createDynamicChart(this.dataset.metric);
          });
        });
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // GRAFÄ°K 4: SEKTÃ–REL YARIÅ GRAFÄ°ÄÄ° (Multi-Line)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const sectorRaceCanvas = document.getElementById('sectorRaceChart');
      if (sectorRaceCanvas && historicalSectorData.length > 0) {
        // Verileri Ã¼lke ve yÄ±la gÃ¶re grupla
        const countryData = {};
        const years = new Set();
        
        historicalSectorData.forEach(row => {
          years.add(row.yil);
          if (!countryData[row.ulke_adi]) {
            countryData[row.ulke_adi] = {};
          }
          countryData[row.ulke_adi][row.yil] = row.ihracat;
        });
        
        const sortedYears = Array.from(years).sort();
        const datasets = Object.keys(countryData).map((country, i) => ({
          label: country,
          data: sortedYears.map(y => countryData[country][y] || 0),
          borderColor: pastelColors[i % pastelColors.length],
          backgroundColor: pastelColors[i % pastelColors.length].replace('0.8', '0.1'),
          borderWidth: 2,
          pointRadius: 4,
          pointHoverRadius: 6,
          tension: 0.3,
          fill: false
        }));
        
        new Chart(sectorRaceCanvas.getContext('2d'), {
          type: 'line',
          data: { labels: sortedYears, datasets },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: { mode: 'index', intersect: false },
            plugins: {
              legend: {
                position: 'right',
                labels: { boxWidth: 12, padding: 8, font: { size: 11 } }
              },
              tooltip: {
                backgroundColor: 'rgba(0,0,0,0.85)',
                padding: 12,
                callbacks: {
                  label: (ctx) => ctx.dataset.label + ': $' + ctx.raw.toLocaleString('tr-TR') + ' M'
                }
              }
            },
            scales: {
              x: { title: { display: true, text: 'YÄ±l' }, grid: { display: false } },
              y: { 
                title: { display: true, text: 'Ä°hracat (Milyon $)' },
                ticks: { callback: (v) => '$' + v.toLocaleString('tr-TR') }
              }
            }
          }
        });
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // GRAFÄ°K 5: GSYÄ°H SIRALAMASI (Bar Chart)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const gdpRankingCanvas = document.getElementById('gdpRankingChart');
      if (gdpRankingCanvas && currentEconomyData.length > 0) {
        const sorted = [...currentEconomyData].sort((a, b) => b.gsyh - a.gsyh);
        
        new Chart(gdpRankingCanvas.getContext('2d'), {
          type: 'bar',
          data: {
            labels: sorted.map(d => d.ulke_adi),
            datasets: [{
              label: 'GSYÄ°H (Milyar $)',
              data: sorted.map(d => d.gsyh),
              backgroundColor: sorted.map((_, i) => pastelColors[i % pastelColors.length]),
              borderRadius: 6
            }]
          },
          options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: (ctx) => 'GSYÄ°H: $' + ctx.raw.toLocaleString('tr-TR') + ' Milyar'
                }
              }
            },
            scales: {
              x: { 
                beginAtZero: true,
                ticks: { callback: (v) => '$' + v.toLocaleString('tr-TR') + 'B' }
              },
              y: { ticks: { font: { size: 11, weight: '500' } } }
            }
          }
        });
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // GRAFÄ°K 6: ENFLASYON KARÅILAÅTIRMASI (Bar Chart)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const inflationCanvas = document.getElementById('inflationChart');
      if (inflationCanvas && currentEconomyData.length > 0) {
        const sorted = [...currentEconomyData].sort((a, b) => b.enflasyon - a.enflasyon);
        
        // Enflasyona gÃ¶re renk (dÃ¼ÅŸÃ¼k=yeÅŸil, yÃ¼ksek=kÄ±rmÄ±zÄ±)
        const getInflationColor = (val) => {
          if (val < 5) return 'rgba(72, 187, 120, 0.8)';
          if (val < 10) return 'rgba(236, 201, 75, 0.8)';
          if (val < 20) return 'rgba(237, 137, 54, 0.8)';
          return 'rgba(245, 101, 101, 0.8)';
        };
        
        new Chart(inflationCanvas.getContext('2d'), {
          type: 'bar',
          data: {
            labels: sorted.map(d => d.ulke_adi),
            datasets: [{
              label: 'Enflasyon (%)',
              data: sorted.map(d => d.enflasyon),
              backgroundColor: sorted.map(d => getInflationColor(d.enflasyon)),
              borderRadius: 6
            }]
          },
          options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: (ctx) => 'Enflasyon: %' + ctx.raw.toFixed(1)
                }
              }
            },
            scales: {
              x: { 
                beginAtZero: true,
                ticks: { callback: (v) => '%' + v }
              },
              y: { ticks: { font: { size: 11, weight: '500' } } }
            }
          }
        });
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // GRAFÄ°K 7: GSYÄ°H TREND YARIÅI (Multi-Line)
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      const gdpTrendCanvas = document.getElementById('gdpTrendChart');
      if (gdpTrendCanvas && historicalEconomyData.length > 0) {
        const countryGdp = {};
        const years = new Set();
        
        historicalEconomyData.forEach(row => {
          years.add(row.yil);
          if (!countryGdp[row.ulke_adi]) {
            countryGdp[row.ulke_adi] = {};
          }
          countryGdp[row.ulke_adi][row.yil] = row.gsyh;
        });
        
        const sortedYears = Array.from(years).sort();
        const datasets = Object.keys(countryGdp).map((country, i) => ({
          label: country,
          data: sortedYears.map(y => countryGdp[country][y] || 0),
          borderColor: pastelColors[i % pastelColors.length],
          backgroundColor: pastelColors[i % pastelColors.length].replace('0.8', '0.1'),
          borderWidth: 2,
          pointRadius: 4,
          pointHoverRadius: 6,
          tension: 0.3,
          fill: false
        }));
        
        new Chart(gdpTrendCanvas.getContext('2d'), {
          type: 'line',
          data: { labels: sortedYears, datasets },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            interaction: { mode: 'index', intersect: false },
            plugins: {
              legend: {
                position: 'right',
                labels: { boxWidth: 12, padding: 8, font: { size: 11 } }
              },
              tooltip: {
                backgroundColor: 'rgba(0,0,0,0.85)',
                padding: 12,
                callbacks: {
                  label: (ctx) => ctx.dataset.label + ': $' + ctx.raw.toLocaleString('tr-TR') + ' Milyar'
                }
              }
            },
            scales: {
              x: { title: { display: true, text: 'YÄ±l' }, grid: { display: false } },
              y: { 
                title: { display: true, text: 'GSYÄ°H (Milyar $)' },
                ticks: { callback: (v) => '$' + v.toLocaleString('tr-TR') + 'B' }
              }
            }
          }
        });
      }

      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      // DÃœNYA HARÄ°TASI
      // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      $(document).ready(function() {
        if (Object.keys(mapData).length > 0) {
          $('#world-map').vectorMap({
            map: 'world_mill_en',
            backgroundColor: 'transparent',
            zoomOnScroll: false,
            regionStyle: {
              initial: {
                fill: '#e2e8f0',
                'fill-opacity': 1,
                stroke: '#fff',
                'stroke-width': 0.5
              },
              hover: { 'fill-opacity': 0.8, cursor: 'pointer' }
            },
            series: {
              regions: [{
                values: mapData,
                scale: ['#C6F6D5', '#276749'],
                normalizeFunction: 'polynomial'
              }]
            },
            onRegionTipShow: function(e, el, code) {
              if (mapData[code] !== undefined) {
                el.html('<strong>' + el.html() + '</strong><br>Ä°hracat: <b>$' + mapData[code].toLocaleString() + ' M</b>');
              }
            }
          });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // TREND SPARKLINES (GeÃ§miÅŸ ihracat deÄŸiÅŸimi)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        document.querySelectorAll('.trend-cell').forEach(cell => {
          const country = cell.dataset.country;
          const data = trendData[country];
          
          if (data && data.length > 1) {
            const first = data[0].ihracat;
            const last = data[data.length - 1].ihracat;
            const change = ((last - first) / first * 100).toFixed(1);
            const arrow = change >= 0 ? 'â¬†' : 'â¬‡';
            const color = change >= 0 ? '#22543D' : '#822727';
            cell.innerHTML = '<span style="color:' + color + '; font-weight: 600;">' + arrow + ' ' + (change >= 0 ? '+' : '') + change + '%</span>';
          } else {
            cell.innerHTML = '<span style="color: #718096;">â€”</span>';
          }
        });
      });
    </script>

  <% } else { %>
    <!-- Empty State -->
    <section class="empty-state-section">
      <div class="empty-state-card">
        <div class="empty-state-icon">ğŸ“Š</div>
        <h2>Veri BulunamadÄ±</h2>
        <p>Bu sektÃ¶r iÃ§in henÃ¼z veri bulunmuyor.</p>
        <a href="/dashboard" class="btn btn-primary">â† SektÃ¶rlere DÃ¶n</a>
      </div>
    </section>
  <% } %>

</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SAYFA STÄ°LLERÄ°
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<style>
  .integrated-report {
    max-width: 1400px;
  }

  /* Rapor Header */
  .report-header {
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 2px solid #e2e8f0;
  }

  .report-header h1 {
    font-size: 2.6rem;
    color: #1a202c;
    margin: 0.5rem 0;
  }

  .report-subtitle {
    color: #718096;
    font-size: 1.4rem;
  }

  .back-link {
    display: inline-block;
    color: #4299e1;
    text-decoration: none;
    font-size: 1.3rem;
    margin-bottom: 0.5rem;
  }

  .back-link:hover { text-decoration: underline; }

  /* BÃ¶lÃ¼m Stilleri */
  .report-section {
    margin-bottom: 3rem;
    padding: 2rem;
    background: #fff;
    border-radius: 1rem;
    box-shadow: 0 4px 15px rgba(0,0,0,0.06);
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #e2e8f0;
  }

  .section-header h2 {
    font-size: 1.8rem;
    color: #2d3748;
    margin: 0;
  }

  .section-badge {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #fff;
    padding: 0.5rem 1rem;
    border-radius: 2rem;
    font-size: 1.1rem;
    font-weight: 600;
  }

  /* Viz Grid */
  .viz-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .viz-card {
    background: #f8fafc;
    border-radius: 0.8rem;
    overflow: hidden;
    border: 1px solid #e2e8f0;
  }

  .viz-card .card-header {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #e2e8f0;
    background: #fff;
  }

  .viz-card .card-header h3 {
    font-size: 1.4rem;
    margin: 0;
    color: #2d3748;
  }

  .viz-card .card-subtitle {
    font-size: 1.1rem;
    color: #718096;
  }

  .viz-card .card-body {
    padding: 1rem;
  }

  .card-legend {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    padding: 0.8rem;
    background: #fff;
    border-top: 1px solid #e2e8f0;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 1.1rem;
    color: #4a5568;
  }

  .legend-color {
    width: 14px;
    height: 14px;
    border-radius: 3px;
  }

  .legend-color.low { background: #C6F6D5; }
  .legend-color.mid { background: #68D391; }
  .legend-color.high { background: #276749; }

  /* Tablo KartlarÄ± */
  .table-card {
    background: #f8fafc;
    border-radius: 0.8rem;
    overflow: hidden;
    border: 1px solid #e2e8f0;
  }

  .table-card .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    background: #fff;
    border-bottom: 1px solid #e2e8f0;
  }

  .table-card .card-header h3 {
    font-size: 1.4rem;
    margin: 0;
    color: #2d3748;
  }

  .record-count {
    background: #edf2f7;
    padding: 0.3rem 0.8rem;
    border-radius: 1rem;
    font-size: 1.1rem;
    color: #4a5568;
  }

  .table-responsive {
    overflow-x: auto;
  }

  .data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 1.25rem;
  }

  .data-table th,
  .data-table td {
    padding: 1rem 1.2rem;
    text-align: left;
    border-bottom: 1px solid #e2e8f0;
  }

  .data-table th {
    background: #fff;
    font-weight: 600;
    color: #4a5568;
    white-space: nowrap;
    position: sticky;
    top: 0;
  }

  .data-table tbody tr:hover {
    background: #fff;
  }

  .high-growth-row {
    background: linear-gradient(90deg, rgba(72, 187, 120, 0.08) 0%, transparent 50%);
  }

  /* Badges */
  .iso-badge {
    display: inline-block;
    background: #e2e8f0;
    color: #4a5568;
    padding: 0.2rem 0.5rem;
    border-radius: 0.3rem;
    font-size: 1rem;
    margin-left: 0.3rem;
  }

  .year-badge {
    display: inline-block;
    background: #ebf8ff;
    color: #2b6cb0;
    padding: 0.3rem 0.6rem;
    border-radius: 0.3rem;
    font-weight: 600;
  }

  .growth-badge {
    display: inline-block;
    padding: 0.3rem 0.6rem;
    border-radius: 1rem;
    font-weight: 600;
    font-size: 1.1rem;
  }

  .growth-badge.positive { background: #C6F6D5; color: #22543D; }
  .growth-badge.neutral { background: #FEFCBF; color: #744210; }
  .growth-badge.negative { background: #FED7D7; color: #822727; }

  .indicator-badge {
    display: inline-block;
    padding: 0.3rem 0.6rem;
    border-radius: 0.3rem;
    font-weight: 600;
  }

  .indicator-badge.good { background: #C6F6D5; color: #22543D; }
  .indicator-badge.warning { background: #FEFCBF; color: #744210; }
  .indicator-badge.danger { background: #FED7D7; color: #822727; }

  .risk-badge {
    display: inline-block;
    padding: 0.3rem 0.8rem;
    border-radius: 0.3rem;
    font-weight: 700;
    font-size: 1.1rem;
  }

  .risk-badge.risk-a { background: #C6F6D5; color: #22543D; }
  .risk-badge.risk-b { background: #BEE3F8; color: #2A4365; }
  .risk-badge.risk-c { background: #FEFCBF; color: #744210; }
  .risk-badge.risk-d { background: #FED7D7; color: #822727; }

  /* Empty State */
  .empty-state-inline {
    padding: 2rem;
    text-align: center;
    color: #718096;
    font-size: 1.4rem;
    background: #f7fafc;
    border-radius: 0.5rem;
  }

  .empty-state-inline span {
    font-size: 2rem;
    margin-right: 0.5rem;
  }

  /* KPI Icon Colors */
  .kpi-icon.purple {
    background: linear-gradient(135deg, #9F7AEA 0%, #6B46C1 100%);
  }

  /* Charts Section */
  .charts-section {
    margin-top: 2rem;
    margin-bottom: 2rem;
  }

  .subsection-title {
    font-size: 1.5rem;
    color: #2d3748;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e2e8f0;
  }

  .charts-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }

  .chart-card {
    background: #f8fafc;
    border-radius: 0.8rem;
    overflow: hidden;
    border: 1px solid #e2e8f0;
  }

  .chart-card.full-width {
    grid-column: 1 / -1;
  }

  .chart-card .card-header {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #e2e8f0;
    background: #fff;
  }

  .chart-card .card-header h4 {
    font-size: 1.3rem;
    margin: 0;
    color: #2d3748;
  }

  .chart-card .card-body {
    padding: 1rem;
  }

  /* Detailed Table Styles */
  .detailed-table .data-table {
    font-size: 1.15rem;
  }

  .detailed-table th {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #fff;
    font-size: 1.1rem;
  }

  .exporter-badge {
    margin-left: 0.3rem;
    font-size: 1rem;
  }

  .capacity-bar {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .capacity-bar .capacity-fill {
    height: 8px;
    background: linear-gradient(90deg, #48bb78, #38a169);
    border-radius: 4px;
    min-width: 20px;
  }

  .capacity-bar span {
    font-size: 1.1rem;
    color: #4a5568;
    font-weight: 600;
  }

  .text-success {
    color: #22543D;
    font-weight: 600;
  }

  .text-danger {
    color: #822727;
  }

  .trade-balance {
    display: inline-block;
    padding: 0.3rem 0.6rem;
    border-radius: 0.3rem;
    font-weight: 700;
    font-size: 1.1rem;
  }

  .trade-balance.positive {
    background: #C6F6D5;
    color: #22543D;
  }

  .trade-balance.negative {
    background: #FED7D7;
    color: #822727;
  }

  .trend-cell {
    text-align: center;
    min-width: 80px;
  }

  .trend-sparkline {
    font-size: 1.2rem;
  }

  /* Accordion Stilleri */
  .accordion-section {
    margin-top: 1.5rem;
  }

  .accordion-toggle {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.5rem;
    background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
    border: 1px solid #e2e8f0;
    border-radius: 0.8rem;
    cursor: pointer;
    font-size: 1.3rem;
    font-weight: 600;
    color: #4a5568;
    transition: all 0.3s ease;
  }

  .accordion-toggle:hover {
    background: linear-gradient(135deg, #edf2f7 0%, #e2e8f0 100%);
  }

  .accordion-toggle.active {
    border-radius: 0.8rem 0.8rem 0 0;
    border-bottom: none;
  }

  .accordion-icon {
    font-size: 1rem;
    transition: transform 0.3s ease;
  }

  .accordion-content {
    border: 1px solid #e2e8f0;
    border-top: none;
    border-radius: 0 0 0.8rem 0.8rem;
    padding: 1.5rem;
    background: #fff;
  }

  /* Metric Tabs Stilleri */
  .metric-tabs {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .metric-tab {
    padding: 0.6rem 1.2rem;
    border: 2px solid #e2e8f0;
    border-radius: 2rem;
    background: #fff;
    color: #4a5568;
    font-size: 1.2rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .metric-tab:hover {
    border-color: #667eea;
    color: #667eea;
  }

  .metric-tab.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-color: transparent;
    color: #fff;
  }

  /* Economy Charts Grid */
  .economy-charts-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }

  @media (max-width: 992px) {
    .economy-charts-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Dynamic Comparison Card */
  .dynamic-comparison .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
  }

  .dynamic-comparison .card-header h3 {
    margin: 0;
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .charts-grid {
      grid-template-columns: 1fr;
    }
    .chart-card.full-width {
      grid-column: 1;
    }
  }

  @media (max-width: 768px) {
    .metric-tabs {
      justify-content: center;
    }
    .metric-tab {
      font-size: 1.1rem;
      padding: 0.5rem 1rem;
    }
    .accordion-toggle {
      font-size: 1.2rem;
      padding: 0.8rem 1rem;
    }
  }
</style>

<%- include('../includes/dashboard-footer') %>
